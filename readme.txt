CRUD DE PACIENTES
LISTADO
Y GUARDAR FALTA EDITAR Y DESHABILITAR


modulo de medico(desarrollandose)
CREATE PROCEDURE SP_REGISTRAR_MEDICO(IN NOMBRE VARCHAR(100),IN APELLIDO_PAT VARCHAR(100),
IN APELLIDO_MAT VARCHAR(100), IN DIRECCION VARCHAR(100), IN CEL VARCHAR(50),
IN FNAC DATE, IN DOCUMENTO VARCHAR(15),IN IDESPECIALIDAD INT, IN USUARIO VARCHAR(100),
IN CONTRA VARCHAR(255),IN IDROL INT, IN CORREO VARCHAR(100), IN RUTA VARCHAR(512))
BEGIN

DECLARE CANTIDADUSER INT;
DECLARE CANTIDADMEDICO INT;
SET @CANTIDADUSER:=(SELECT COUNT(*) FROM usuario WHERE usu_nombre =USUARIO);
IF @CANTIDADUSER = 0 THEN
 SET @CANTIDADMEDICO:=(SELECT COUNT(*) FROM medico WHERE `medico_nrodocumento` =DOCUMENTO);
 IF @CANTIDADMEDICO = 0 THEN
 INSERT INTO usuario(usu_nombre,usu_contrasena,rol_id,usu_status,usu_email,usu_foto)
	VALUE(USUARIO,CONTRA,IDROL,'ACTIVO',EMAIL,RUTA);
INSERT INTO medico(`medico_nombre`,`medico_apepat`,medico_apemat,`medico_direccion`,
`medico_movil`,`medico_fenac`,`medico_nrodocumento`,`especialidad_id`,`usuario_id`)
VALUE(NOMBRE,APELLIDO_PAT,APELLIDO_MAT,DIRECCION,CEL,FNAC,DOCUMENTO,IDESPECIALIDAD,
(SELECT MAX(usu_id) FROM usuario));
SELECT 1;
 ELSE 
 SELECT 2;
 END IF;
	
ELSE
SELECT 3;
END IF;

END